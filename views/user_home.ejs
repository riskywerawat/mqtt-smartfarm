<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" type="image/png" href="/public/images/android-icon-96x96.png">
    <title>ระบบควบคุมฟาร์มไก่</title>
 <!-- เพิ่มเติม-------------------------------- -->
 <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
 <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" 
               crossorigin="anonymous"></script>
 <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" 
               crossorigin="anonymous"></script>
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
                crossorigin="anonymous">
    <link rel="stylesheet" href="/public/css/style2.css">      
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>  
    <script src="/public/js/script.js"></script>           
</head>
<body>
      
   
         
       
         

          
        
        <div class="wrapper ">
            <div class="sidebar " id="mysidebar">
                <h2><%= user %></h2>
               
                   
                       <a  class="nav-link active" href="/indexuser"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                       <a class="nav-link" href="/logout"  onclick="sessionStorage.clear()"><i class="fas fa-sign-out-alt"></i>ออกจากระบบ</a>
                       <a href="javascript:void(0);" class="icon" onclick="myFunctionTab()"><i class="fa fa-bars"></i> </a>         
            </div>
            
            
            <div class="main_content ">
               <div class="container-fluid">
                    <div class="row">
                       <div class="col-6"> 
                           <h2 >Dashboard</h2>  
                        </div>
                          
                        <div class="col-4 " style="text-align: end;padding-top: 10px;"> 
                            <button class="btn btn-outline-secondary"><a href="/indexuser" style="color: black;">ย้อนกลับ</a></button>
                        </div>
                       
                    </div>
                     

                    <div class="row">
                        <div class="Showblock col-lg-2 col-md-5 col-sm-6 col-6 " >
                            
                            <div class="card1" >
                                <div class="card-icon ">
                                    <i class="image-temperature"><img src="/public/images/temperature.ico" width="100px" height="100px"></i>
                                
                                </div>
                              
                                    <div class="Data1 ">
                                        <p class="card-category" style="margin-top: 10px;">temperature</p>
                                            <h2 class="card-title" style="font-size: 40px;">
                                                <strong id="temperature" >25</strong>   
                                                <span>C</span>
                                            </h2>
                                    </div>

                                        <div class="Tempcontrol row"style="text-align: center;">
                                           
                                           
                                            <div class="col-12">
                                                <span>ตั้งค่าอุณหภูมิ</s>
                                            </div>

                                                <div class="col-8 offset-2"> 
                                                    <input type="text" class="form-control" width="50px">
                                                </div>
                                                    
                                                    <div class="col-12 btn-set" style="margin-top: 10px;">
                                                        <button class="btn btn-outline-primary" type="submit" >บันทึก</button>
                                                    </div>
                                        </div>
                            </div>
                                
                        </div>

                        <div class="Showblock col-lg-2 col-md-5 col-sm-6 col-6">
                            <div class="card1">
                                <div class="card-icon">
                                    <i class="image-humidity"><img src="/public/images/humidity.png" width="100px" height="100px"></i>
                                </div> 

                                <div class="Data1">
                                    <p class="card-category" style="margin-top: 10px;">humidity</p>
                                        <h2 class="card-title"style="font-size: 40px;" >
                                            <strong id="humidity">70</strong>
                                            <span>%</span>
                                        </h2>
                                    </div>
                                  

                                </div>

                        </div>
                        
    <!--------------Heater---------Heater------Heater---------Heater------Heater---------Heater------Heater---------Heater------------------Heater-------------------Heater----------------------------------------------------------------  -->
                            <div class="Showblock col-lg-2 col-md-5 col-sm-6 col-6">
                                <div class="card2">
                                    <div class="card-icon">
                                        <i class="image-humidity"><img src="/public/images/fire.png" width="50px" height="50px"></i>
                                    </div> 

                                    <div class="Data">
                                        <p class="card-category" style="margin-top: 10px;">Heater</p>
                                        
                                        <div class="list-group list-group-flush">

                                            <div class="list-group-item">
                                                <span class="on-off">OFF</span>
                                                    <label class="switch "> 
                                                        <input type="checkbox" class="primary">
                                                            <span class="slider round"></span>
                                                    </label>
                                                <span class="on-off">ON</span>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ปุ่ม เซ็ต Temp -->
                                    <div class="btn-set">
                                        <button class="btn btn-outline-primary"data-toggle="modal" data-target="#SetHeater" > Set Auto</button>
                                    </div>

                                    <!-- แสดงช่วง Temp -->
                                    <div class="show-temp">
                                        <span>เปิดเมื่ออุณหภูมิ : 27</span>
                                    </div>

                                </div>
                            </div>


                            <!-- The Modal -->
                        <div class="modal fade" id="SetHeater">
                            <div class="modal-dialog ">
                            <div class="modal-content">
                            
                                <!-- Modal Header -->
                                <div class="modal-header">
                                <h4 class="modal-title">Heater ตั้งค่าอูณหภูมิ</h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>
                                
                                <!-- Modal body -->
                                <div class="modal-body " >
                                    <div class="col-6 offset-3"> 
                                        เปิดเมื่ออุณหภูมิ <input type="text" class="form-control" width="50px">
                                    </div>
                                </div>
                                
                                <!-- Modal footer -->
                                <div class="modal-footer">
                                <button type="button" class="btn btn-outline-danger" data-dismiss="modal">ยกเลิก</button>
                                    <button type="button" class="btn btn-outline-primary" data-dismiss="modal">บันทึก</button>
                                
                                </div>
                                
                            </div>
                            </div>
                        </div>


    <!-- ----------------------Pump-----------------Pump-----------------Pump-----------------Pump------------------------Pump--------------Pump--------------------------------------------------- -->
                                <div class="Showblock col-lg-2 col-md-5 col-sm-6 col-6">
                                        <div class="card">
                                            <div class="card-icon">
                                                    <i class="image-fire"><img src="/public/images/pump.png" width="50px" height="50px"></i>
                                                </div>

                                                <div class="Data">
                                                        <p class="card-category"style="margin-top: 1  0px;">Pump</p>
                                                    <div class="list-group list-group-flush">

                                                        <div class="list-group-item">
                                                            <span class="on-off">OFF</span>
                                                                <label class="switch "> 
                                                                    <input type="checkbox" class="primary">
                                                                        <span class="slider round"></span>
                                                                </label>
                                                            <span class="on-off">ON</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- ปุ่ม เซ็ต Temp -->
                                                <div class="btn-set">
                                                    <button class="btn btn-outline-primary" data-toggle="modal" data-target="#SetPump"> Set Auto</button>
                                                </div>
                
                                                <!-- แสดงช่วง Temp -->
                                                <div class="show-temp">
                                                    <span>เปิดเมื่ออุณหภูมิ : 27</span> <br>
                                                        <span>ปิดเมื่ออุณหภูมิ : 34</span>
                                                    
                                                </div>
            
                                                    
                                        </div>

                                    </div>

                                        <!-- The Modal -->
                            <div class="modal fade" id="SetPump">
                                    <div class="modal-dialog ">
                                        <div class="modal-content">
                                        
                                            <!-- Modal Header -->
                                            <div class="modal-header">
                                                <h4 class="modal-title">Heater ตั้งค่าอูณหภูมิ</h4>
                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            </div>
                                            
                                            <!-- Modal body -->
                                            <div class="modal-body row" >
                                                <div class="col-6"> 
                                                    เปิดเมื่ออุณหภูมิ <input type="text" class="form-control" width="50px">
                                                </div>
                                                <div class="col-6"> 
                                                    ปิดเมื่ออุณหภูมิ <input type="text" class="form-control" width="50px">
                                                </div>
                                                
                                    
                                        
                                            </div>
                                            
                                            <!-- Modal footer -->
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-outline-danger" data-dismiss="modal">ยกเลิก</button>
                                                    <button type="button" class="btn btn-outline-primary" data-dismiss="modal">บันทึก</button>
                                            
                                            </div>
                                            
                                        </div>
                                    </div>
                            </div>
                                    
    <!-- -----Fan--------Fan------------------------------Fan-----------------------------------------------------Fan------------------------------- -->
                                    <div class="Showblock col-lg-2 col-md-5 col-sm-6 col-6">
                                            <div class="card2">
                                                <div class="card-icon">
                                                    <i class="image-fire"><img src="/public/images/fan.png" width="50px" height="50px"></i>
                                                </div>

                                                <div class="Data">
                                                    <p class="card-category"style="margin-top: 1  0px;">Fan</p>
                                                        <div class="list-group list-group-flush">

                                                            <div class="list-group-item">
                                                                <span class="on-off">OFF</span>
                                                                    <label class="switch "> 
                                                                        <input type="checkbox" class="primary">
                                                                            <span class="slider round"></span>
                                                                    </label>
                                                                <span class="on-off">ON</span>
                                                            </div>
                                                        </div>
                                                </div>
                                                <!-- ปุ่ม เซ็ต Temp -->
                                                <div class="btn-set">
                                                    <button class="btn btn-outline-primary" data-toggle="modal" data-target="#SetFan"> Set Auto</button>
                                                </div>

                                                <!-- แสดงช่วง Temp -->
                                                <div class="show-temp">
                                                    <span>เปิดเมื่ออุณหภูมิ : 27</span>
                                                </div>    
                                            </div>
                                    </div>
                                    <!-- The Modal -->
                                        <div class="modal fade" id="SetFan">
                                            <div class="modal-dialog ">
                                                <div class="modal-content">
                                                
                                                    <!-- Modal Header -->
                                                    <div class="modal-header">
                                                        <h4 class="modal-title">Heater ตั้งค่าอูณหภูมิ</h4>
                                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                    </div>
                                                    
                                                    <!-- Modal body -->
                                                    <div class="modal-body row" >
                                                        <div class="col-6 offset-3"> 
                                                            เปิดเมื่ออุณหภูมิ <input type="text" class="form-control" width="50px">
                                                        </div>
                                                    
                                                        
                                            
                                                
                                                    </div>
                                                    
                                                    <!-- Modal footer -->
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-outline-danger" data-dismiss="modal">ยกเลิก</button>
                                                            <button type="button" class="btn btn-outline-primary" data-dismiss="modal">บันทึก</button>
                                                    
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                    </div>
                                
                    </div>
                 <!-- -----จบ-----------จบ-----------จบ------------จบ-------------จบ-----------จบ------------จบ-------------จบ-----------จบ------------จบ------------------จบ -->
                </div>
            </div> 
        </div>
        
        <script>
            if (sessionStorage.getItem("token") && sessionStorage.getItem("pri") != 2) {
                 window.location.href =
                   "http://localhost:3000/834049beb19a82b97082598f16bd1057d94121ce942352bc9c3320f5d9ec8e16";
               }
       </script>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="/socket.io/socket.io.js"></script>

<script>
   
   if (
    sessionStorage.getItem("token") &&
    sessionStorage.getItem("pri") != 2
  ) {
  window.location.href = 'http://localhost:3000/834049beb19a82b97082598f16bd1057d94121ce942352bc9c3320f5d9ec8e16'
  }
  var socket = io();
  $(() => {
    socket.emit("message");//showdata

    socket.on("topic2", mes => {
      const data = JSON.parse(mes);
      const temp = data.TEMP;
      const hum = data.HUMIDI;
      // console.log(data);
      $("#temperature").text(temp);
      $("#humidity").text(hum);
      $("#messages").text(mes);
    });
  });


</script>

</body>
</html>